<!DOCTYPE html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
	<title>Tito's Lounge</title>
	<script src="./dist/bundle.js" defer></script>
	<style>
	* {
		margin: 0;
		padding: 0;
	}

	html, body {
		height: 100%;
		margin: 0;
	}

	#canvas {
		width: 100%;
		height: 100%;
		display: block;
	}

	.stat-row {
		display: flex;
		flex-direction: row;
		justify-content: space-between;
	}

	#raycast-dist-btn, #raycast-count-btn {
		flex: 1;
	}

	</style>
</head>
<body style="background-color:black;">
	<div style="position: fixed; top: 1rem; right: 1rem; width: 12rem; color: white; background-color: rgba(0, 0, 0, 0.8); font-weight: bold; display: flex; flex-direction: column;">
		<div id="stat-inner">
			<div class="stat-row">
				<div id="fps-ele">0.00</div>
				<div>FPS</div>
			</div>
			<div class="stat-row">
				<div id="solver-ele">0.00</div>
				<div>solver</div>
			</div>
			<div class="stat-row">
				<div id="render-ele">0.00</div>
				<div>render</div>
			</div>
			<div class="stat-row">
				<div id="unknown-ele">0.00</div>
				<div>unknown</div>
			</div>
		</div>
	</div>

	<div style="position: absolute; bottom: 0rem; right: 1rem; width: 15rem; color: white; background-color: rgba(0, 0, 0, 0.8); font-weight: bold; display: flex; flex-direction: column;">
		<div style="display: flex; flex-direction: column">
			Max ray len
			<div style="display: flex; flex-direction: row; align-items: center; justify-content: space-evenly; width: 100%;">
				<button id="raycast-dist-btn">-100</button>
				<button id="raycast-dist-btn">-50</button>
				<div id="raycast-dist-ele" style="color: white; font-weight: bold;">0</div>
				<button id="raycast-dist-btn">+50</button>
				<button id="raycast-dist-btn">+100</button>
			</div>
			Num rays
			<div style="display: flex; flex-direction: row; align-items: center; justify-content: space-evenly; width: 100%;">
				<button id="raycast-count-btn">-100</button>
				<button id="raycast-count-btn">-50</button>
				<div id="raycast-count-ele" style="color: white; font-weight: bold;">0</div>
				<button id="raycast-count-btn">+50</button>
				<button id="raycast-count-btn">+100</button>
			</div>
			<button id="toggle-2d-view">Show 2d view</button>
		</div>
	</div>

	<div id="focus-warning" style="position:absolute; width: 100%; top: 50%; text-align: center; color: white; background-color: rgba(0, 0, 0, 0.8);">
		Click to focus
	</div>

	<div style="position: absolute; bottom: 0rem; left: 1rem; width: 20rem; color: white; background-color: rgba(0, 0, 0, 0.8); font-weight: bold; display: flex; flex-direction: column;">
		<div>
			- Movement: WASD
		</div>
		<div>
			- Move mouse to look around
		</div>
		<div>
			- Arrow keys to look around
		</div>
	</div>

	<canvas id="canvas" width="400" height="300" tabindex="0"></canvas>
<script id="v-plainColor" type="x-shader/x-vector">
attribute vec2 a_position;

uniform vec2 u_resolution;

void main() {
	vec2 clipSpace = (a_position / u_resolution * 2.0) - 1.0;
	gl_Position = vec4(clipSpace.x, clipSpace.y * -1.0, 0, 1);
}
</script>
<script id="f-plainColor" type="x-shader/x-fragment">
precision mediump float;

uniform vec4 u_color;
void main() {
	gl_FragColor = u_color;
}
</script>
<script id="v-walls" type="x-shader/x-vector">
attribute vec2 a_position;
attribute vec2 a_texcoord;
attribute float a_dist;

uniform vec2 u_resolution;

varying vec2 v_texcoord;
varying float v_dist;

void main() {
	vec2 clipSpace = (a_position / u_resolution * 2.0) - 1.0;

	gl_Position = vec4(clipSpace.x, clipSpace.y * -1.0, 0, 1);

	v_texcoord = a_texcoord;
	v_dist = a_dist;
}
</script>
<script id="f-walls" type="x-shader/x-fragment">
precision mediump float;

uniform sampler2D u_texture;

varying vec2 v_texcoord;
varying float v_dist;

void main() {
	gl_FragColor = texture2D(u_texture, v_texcoord) * v_dist;
}
</script>
<body>

